{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///F:/Projects/Odoo_Hackathon_Human_Resource_Management_System/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\nexport function getServiceSupabase() {\n  const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\n  return createClient(supabaseUrl, serviceRoleKey);\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa;AAE3C,SAAS;IACd,MAAM,iBAAiB,QAAQ,GAAG,CAAC,yBAAyB;IAC5D,OAAO,IAAA,gMAAY,EAAC,aAAa;AACnC","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///F:/Projects/Odoo_Hackathon_Human_Resource_Management_System/src/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\nimport { cookies } from 'next/headers';\nimport { getServiceSupabase } from './supabase';\nimport type { AuthUser, Employee } from './types';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'dayflow-secret';\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 10);\n}\n\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport function generateToken(user: AuthUser): string {\n  return jwt.sign(user, JWT_SECRET, { expiresIn: '7d' });\n}\n\nexport function verifyToken(token: string): AuthUser | null {\n  try {\n    return jwt.verify(token, JWT_SECRET) as AuthUser;\n  } catch {\n    return null;\n  }\n}\n\nexport async function getCurrentUser(): Promise<AuthUser | null> {\n  const cookieStore = await cookies();\n  const token = cookieStore.get('auth_token')?.value;\n  if (!token) return null;\n  return verifyToken(token);\n}\n\nexport async function getEmployeeById(id: string): Promise<Employee | null> {\n  const supabase = getServiceSupabase();\n  const { data, error } = await supabase\n    .from('employees')\n    .select('*')\n    .eq('id', id)\n    .single();\n  \n  if (error) return null;\n  return data;\n}\n\nexport function generateLoginId(\n  companyCode: string,\n  firstName: string,\n  lastName: string,\n  joiningYear: number,\n  serialNumber: number\n): string {\n  const initials = (firstName.charAt(0) + lastName.substring(0, 2)).toUpperCase();\n  const serial = serialNumber.toString().padStart(4, '0');\n  return `${companyCode}${initials}${joiningYear}${serial}`;\n}\n\nexport function generateRandomPassword(): string {\n  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789@#$%';\n  let password = '';\n  for (let i = 0; i < 12; i++) {\n    password += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return password;\n}\n\nexport function isAdminOrHR(role: string): boolean {\n  return role === 'admin' || role === 'hr';\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAGA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAEtC,eAAe,aAAa,QAAgB;IACjD,OAAO,8IAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,eAAe,eAAe,QAAgB,EAAE,IAAY;IACjE,OAAO,8IAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,SAAS,cAAc,IAAc;IAC1C,OAAO,kJAAG,CAAC,IAAI,CAAC,MAAM,YAAY;QAAE,WAAW;IAAK;AACtD;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe;IAC7C,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,YAAY;AACrB;AAEO,eAAe,gBAAgB,EAAU;IAC9C,MAAM,WAAW,IAAA,8IAAkB;IACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,IACT,MAAM;IAET,IAAI,OAAO,OAAO;IAClB,OAAO;AACT;AAEO,SAAS,gBACd,WAAmB,EACnB,SAAiB,EACjB,QAAgB,EAChB,WAAmB,EACnB,YAAoB;IAEpB,MAAM,WAAW,CAAC,UAAU,MAAM,CAAC,KAAK,SAAS,SAAS,CAAC,GAAG,EAAE,EAAE,WAAW;IAC7E,MAAM,SAAS,aAAa,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACnD,OAAO,GAAG,cAAc,WAAW,cAAc,QAAQ;AAC3D;AAEO,SAAS;IACd,MAAM,QAAQ;IACd,IAAI,WAAW;IACf,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAK;QAC3B,YAAY,MAAM,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM,MAAM;IAClE;IACA,OAAO;AACT;AAEO,SAAS,YAAY,IAAY;IACtC,OAAO,SAAS,WAAW,SAAS;AACtC","debugId":null}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///F:/Projects/Odoo_Hackathon_Human_Resource_Management_System/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { getServiceSupabase } from '@/lib/supabase';\nimport { verifyPassword, generateToken } from '@/lib/auth';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { loginId, password } = await request.json();\n    \n    if (!loginId || !password) {\n      return NextResponse.json({ error: 'Login ID and password are required' }, { status: 400 });\n    }\n\n    const supabase = getServiceSupabase();\n    const { data: employee, error } = await supabase\n      .from('employees')\n      .select('*')\n      .eq('login_id', loginId)\n      .eq('is_active', true)\n      .single();\n\n    if (error || !employee) {\n      return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });\n    }\n\n    const isValid = await verifyPassword(password, employee.password_hash);\n    if (!isValid) {\n      return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });\n    }\n\n    const authUser = {\n      id: employee.id,\n      login_id: employee.login_id,\n      email: employee.email,\n      first_name: employee.first_name,\n      last_name: employee.last_name,\n      role: employee.role,\n      profile_picture: employee.profile_picture,\n      must_change_password: employee.must_change_password,\n    };\n\n    const token = generateToken(authUser);\n    \n    const response = NextResponse.json({ user: authUser });\n    response.cookies.set('auth_token', token, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'lax',\n      maxAge: 60 * 60 * 24 * 7,\n      path: '/',\n    });\n\n    return response;\n  } catch {\n    return NextResponse.json({ error: 'Login failed' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEhD,IAAI,CAAC,WAAW,CAAC,UAAU;YACzB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqC,GAAG;gBAAE,QAAQ;YAAI;QAC1F;QAEA,MAAM,WAAW,IAAA,8IAAkB;QACnC,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,SACf,EAAE,CAAC,aAAa,MAChB,MAAM;QAET,IAAI,SAAS,CAAC,UAAU;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,MAAM,UAAU,MAAM,IAAA,sIAAc,EAAC,UAAU,SAAS,aAAa;QACrE,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,MAAM,WAAW;YACf,IAAI,SAAS,EAAE;YACf,UAAU,SAAS,QAAQ;YAC3B,OAAO,SAAS,KAAK;YACrB,YAAY,SAAS,UAAU;YAC/B,WAAW,SAAS,SAAS;YAC7B,MAAM,SAAS,IAAI;YACnB,iBAAiB,SAAS,eAAe;YACzC,sBAAsB,SAAS,oBAAoB;QACrD;QAEA,MAAM,QAAQ,IAAA,qIAAa,EAAC;QAE5B,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAS;QACpD,SAAS,OAAO,CAAC,GAAG,CAAC,cAAc,OAAO;YACxC,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,QAAQ,KAAK,KAAK,KAAK;YACvB,MAAM;QACR;QAEA,OAAO;IACT,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF","debugId":null}}]
}